# ORACLE ECHO 完全引継書
**作成日**: 2025-06-25  
**対象**: 新規セッション開始時のClaude引継用

## 📋 現在の完了状況（重要）

### ✅ 完全実装済み
- **全10占術システム**: 数秘術、タロット、西洋占星術、ルーン、易経、九星気学、四柱推命、カバラ、ヴェーダ占星術、ケルト占星術
- **コズミックUIダッシュボード**: 完全レスポンシブ、美しいアニメーション
- **環境データ連携**: 気象庁API統合、リアルタイム月相・天体データ
- **本格占術エンジン**: 商用グレード、ファクトチェック済み計算ロジック
- **認証システム**: デモモード実装（ユーザー登録不要）
- **数秘術メッセージDB**: 5名の著名占術師研究に基づく高品質メッセージシステム
- **型定義**: TypeScript完全対応、ビルド成功

### 🔄 継続中・次のタスク
- 他占術システムのメッセージ品質向上（タロット、占星術等）
- エラーハンドリング強化
- パフォーマンス最適化
- デザイン最終磨き込み

## 🚀 即座実行可能なコマンド

### プロジェクト確認
```bash
cd "/Users/masato-mba2024/Develop/Zeami-1 ZAK/projects/uranai-01"
npm run dev  # 開発サーバー起動（http://localhost:3000）
npm run build  # 本番ビルド（必ず成功する状態）
```

### 現状確認
```bash
# TodoList確認
TodoRead

# 最新ログ確認
ls -la docs/logs/2025-06/ | tail -5

# Git状態確認
git status && git log --oneline -3
```

## 📁 プロジェクト構造（重要ファイル）

### 🎯 コア実装
```
src/
├── app/
│   ├── dashboard-client.tsx       # メインダッシュボード
│   ├── input/page.tsx            # パラメータ入力
│   └── divination/               # 全10占術ページ
├── lib/
│   ├── divination/
│   │   ├── engines/              # 占術計算エンジン
│   │   └── messages/             # メッセージシステム
│   ├── api/                      # 環境データAPI
│   └── monitoring/               # システム監視
└── components/
    ├── dashboard/                # ダッシュボードUI
    └── divination/               # 占術結果表示
```

### 📚 ドキュメント
```
docs/
├── logs/2025-06/                 # 詳細開発ログ
├── development/                  # 開発ガイドライン  
└── lessons-learned/              # 重要教訓集
```

## 🧠 忘却防止システム（必須実行）

### セッション開始時（自動実行）
```bash
# 1. コンテキスト復元（必須）
cat HANDOVER_GUIDE.md | head -100
cat CLAUDE.md | head -50
TodoRead

# 2. プロジェクト状態確認
git status && pwd && npm run build

# 3. 最新ログ確認
find docs/logs/2025-06/ -name "*.md" | tail -3 | xargs ls -la
```

### 制約対応システム
- **32K tokens制限**: 各作業を独立したフェーズに分割
- **読み取り制限**: 重要ファイルは分割読み取り（offset/limit活用）
- **忘却対策**: 開発ログに全決定事項を記録
- **コンテキスト保持**: HANDOVER_GUIDE.mdに完全な現状記録

## 🎯 著名占術師研究成果（完了）

### 統合済み占術師スタイル
1. **石井ゆかり**: ロマンチックで超越的でありながら優しい文体
2. **鏡リュウジ**: 心理学的、学術的でありながらアクセシブル
3. **河合隼雄**: 平易な語り口の中に深い洞察、ユーモア、断定しない姿勢
4. **しいたけ**: やわらかく心温まるアプローチ、悪意がなく心が軽くなる
5. **yuji**: カジュアルで親しみやすい、現実的でセンス重視

### 実装場所
- `/src/lib/divination/messages/message-style-guide.ts`: スタイルガイド
- `/src/lib/divination/messages/numerology-messages.ts`: 数秘術メッセージDB（完成）

## 📊 技術仕様（重要）

### 占術システム仕様
- **計算エンジン**: 商用利用可能なアルゴリズムのみ
- **データソース**: 公的機関API（気象庁、NAOJ等）
- **メッセージ**: 1年間重複なし、365パターン以上
- **精度**: ファクトチェック済み、本物の占術理論準拠

### 技術スタック
```json
{
  "framework": "Next.js 15 (App Router)",
  "language": "TypeScript (strict mode)",
  "styling": "Tailwind CSS",
  "database": "Supabase",
  "auth": "デモモード（本格実装準備済み）",
  "apis": "気象庁、天体データ、月相データ",
  "deployment": "Vercel対応"
}
```

## 🔧 開発ワークフロー

### 新機能開発時
1. **TodoWrite**でタスク分解・管理
2. **開発ログ**に決定事項記録
3. **型チェック**→**ビルド**→**テスト**
4. **CLAUDE.md**更新（重要な学び）

### 問題発生時
1. **包括的アプローチ**: 個別修正禁止
2. **根本原因解決**: 表面的回避策NG  
3. **ログ記録**: 失敗パターンをCLAUDE.mdに追加

## 🎨 UIデザイン原則

### 確立済みデザインコンセプト
- **コズミック**: 宇宙・星座・神秘的雰囲気
- **ガラスモーフィズム**: 透明感、枠線なし
- **ゆっくりアニメーション**: 20-40秒サイクル、穏やかな浮遊
- **余白の美学**: Kyuujitsu風の広い余白

### レスポンシブ対応
- **モバイル** (<768px): タブナビゲーション
- **タブレット** (768px-1023px): スライドサイドバー
- **デスクトップ** (≥1024px): マルチカラムレイアウト

## 🔍 デバッグ・トラブルシューティング

### よくある問題と解決法
```bash
# ビルドエラー
npm run build  # 型エラー特定
npm run lint   # リント問題確認

# 開発サーバー問題
rm -rf .next node_modules
npm install && npm run dev

# 環境変数問題
cp .env.example .env.local  # 設定確認
```

### 緊急時対応
1. **バックアップ確認**: `git log --oneline -10`
2. **最後の成功ポイント**: ビルド成功時点にリセット
3. **ログ参照**: `docs/logs/2025-06/`で最新状況確認

## 📈 次期開発計画

### Phase 1 完了事項（現在）
- [x] 全10占術システム実装
- [x] 数秘術メッセージ高品質化
- [x] 環境データ連携
- [x] レスポンシブUI完成

### Phase 2 予定（次セッション）
- [ ] 他占術のメッセージ品質向上
- [ ] エラーハンドリング強化
- [ ] パフォーマンス最適化
- [ ] 最終デザイン磨き込み

### Phase 3 予定（本格展開）
- [ ] 本格認証システム
- [ ] 有料プラン機能
- [ ] 多言語対応
- [ ] モバイルアプリ

## 🚨 重要な制約・注意事項

### Claude制約対応
- **32K tokens**: 1セッション内で複数フェーズに分割実行
- **読み取り制限**: 大きなファイルはoffset/limit使用
- **忘却問題**: 必ずHANDOVER_GUIDE.md参照

### セキュリティ
- **APIキー**: サーバーサイドのみ
- **機密データ**: 暗号化必須
- **商用対応**: ライセンス問題クリア済み

## 📞 緊急時連絡先・リソース

### 重要ドキュメント
- `CLAUDE.md`: プロジェクト全体ガイドライン
- `PRODUCTION_SPEC.md`: 詳細技術仕様
- `docs/logs/`: 開発履歴・決定事項

### 外部リソース
- 気象庁API: https://www.jma.go.jp/
- NAOJ天体データ: https://eco.mtk.nao.ac.jp/
- Next.js 15 Docs: https://nextjs.org/docs

---

## 🎯 新セッション開始時のチェックリスト

### 必須実行（コピペ用）
```bash
# 1. プロジェクト移動・状態確認
cd "/Users/masato-mba2024/Develop/Zeami-1 ZAK/projects/uranai-01"
pwd && git status

# 2. 引継書・ガイドライン確認  
cat HANDOVER_GUIDE.md | head -100
cat CLAUDE.md | head -50

# 3. TodoList・最新状況確認
TodoRead
find docs/logs/2025-06/ -name "*.md" | tail -3 | xargs basename

# 4. システム動作確認
npm run build && echo "✅ ビルド成功"
```

### 作業前の心構え
- [ ] 大規模変更は段階的に実行
- [ ] 重要決定は開発ログに記録
- [ ] 32K制限を意識したフェーズ分割
- [ ] ビルド成功状態を常に維持

---

**この引継書により、新セッションでも即座に高品質な開発を継続可能です。**