# 本番環境リリースまでの残タスク

## 🚨 重要な修正事項

### 1. ビルドエラーの解決（優先度：最高）
- [ ] **swissephモジュールエラー修正**
  - webpackでバイナリファイルを適切に処理
  - またはサーバーサイドのみで使用するよう分離
- [ ] **アカシックレコードエンジンの構文エラー**
  - テンプレートリテラルのパースエラー修正
- [ ] **unified-result-converter.tsの型エラー**
  - JSXからアイコン名文字列への変換完了

### 2. 画面フロー総合テスト（優先度：高）
- [ ] **エントリー → 入力 → ダッシュボードフロー**
  - パラメータの保存と読み込み確認
  - localStorageのデータ永続性テスト
- [ ] **各占術詳細ページ**
  - 10種類すべての占術ページ動作確認
  - パラメータの引き継ぎ検証
  - 占術エンジンとの接続実装

## 🔧 本番環境設定

### 3. 環境変数設定（優先度：高）
- [ ] **Supabase接続情報**
  - NEXT_PUBLIC_SUPABASE_URL
  - NEXT_PUBLIC_SUPABASE_ANON_KEY
  - SUPABASE_SERVICE_ROLE_KEY
- [ ] **外部API（段階的実装）**
  - OpenWeatherMap API
  - NASA API
  - その他の環境データAPI

### 4. データベース実装（優先度：高）
- [ ] **Supabaseスキーマ作成**
  - ユーザー情報テーブル
  - 占術結果履歴テーブル
  - キャッシュテーブル
- [ ] **RLS（Row Level Security）設定**
- [ ] **データ永続化の実装**
  - 現在のlocalStorageからデータベースへ移行

## ✅ 品質保証

### 5. パフォーマンス最適化（優先度：中）
- [ ] **ビルドサイズ最適化**
  - 不要な依存関係の削除
  - コード分割の最適化
- [ ] **実行速度テスト**
  - 13占術並列実行のパフォーマンス測定
  - キャッシュヒット率の検証

### 6. レスポンシブ・アクセシビリティ（優先度：中）
- [ ] **モバイル表示確認**
  - 各画面のレスポンシブ対応
  - タッチ操作の最適化
- [ ] **アクセシビリティ監査**
  - スクリーンリーダー対応
  - キーボードナビゲーション

### 7. エラーハンドリング検証（優先度：中）
- [ ] **フォールバック動作確認**
  - API障害時の動作
  - オフライン時の動作
- [ ] **エラーログ収集**
  - Sentryなどのエラートラッキング設定

## 🚀 デプロイメント準備

### 8. Vercel設定（優先度：高）
- [ ] **環境変数の設定**
- [ ] **ビルド設定の最適化**
- [ ] **ドメイン設定**
- [ ] **プレビューデプロイでのテスト**

### 9. セキュリティ対策（優先度：高）
- [ ] **CSP（Content Security Policy）の調整**
- [ ] **環境変数の安全な管理**
- [ ] **APIキーの保護**

## 📊 推定作業時間

1. ビルドエラー修正：2-4時間
2. 画面フロー総合テスト：2-3時間
3. 環境変数・DB設定：3-4時間
4. パフォーマンス・品質テスト：2-3時間
5. デプロイメント準備：1-2時間

**合計推定時間：10-16時間**

## 🎯 優先順位

1. **最優先**：ビルドエラーの解決
2. **高優先**：画面フロー・データベース・デプロイ準備
3. **中優先**：パフォーマンス・品質保証

## 📝 次のアクション

1. swissephモジュールエラーの解決
2. テンプレートリテラルの構文エラー修正
3. 画面フローの総合テスト実施